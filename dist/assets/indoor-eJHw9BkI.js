import{_ as V,d as u,g as $,h as T,o as d,c as p,a as l,F as B,r as H,t as k,i as f,b as M,n as y,j as P,e as W,k as A,l as E,q as t,s as e,B as x,u as i}from"./index-CGjQSwQ5.js";const L={key:0},z={class:"btn-group"},I=["onClick"],O={__name:"PanelControl",props:{id:Number,width:{type:Number,default:320}},setup(D){const h=D,a=u({wind:"Low",temp:22,mode:"Cool",status:"开机"}),b=$(()=>[{label:"风速",value:a.value.wind},{label:"温度",value:`${a.value.temp}℃`},{label:"模式",value:a.value.mode},{label:"状态",value:a.value.status==="开机"?"运行中":"已关机"}]),_=u([{iconClass:"iconfont icon-turnoff",clickHandler:g,label:"Power"},{iconClass:"iconfont icon-cloud-sync",clickHandler:w,label:"Wind Speed"},{iconClass:"iconfont icon-m",clickHandler:s,label:"Mode"},{iconClass:"iconfont icon-arrow-up-filling",clickHandler:o,label:"Temperature Up"},{iconClass:"iconfont icon-arrow-down-filling",clickHandler:C,label:"Temperature Down"}]);u(300);function g(){a.value.status=a.value.status==="开机"?"关机":"开机"}function w(){const c=["Low","Medium","High"];let v=c.indexOf(a.value.wind);a.value.wind=c[(v+1)%c.length]}function s(){const c=["Cool","Heat","Fan","Dry"];let v=c.indexOf(a.value.mode);a.value.mode=c[(v+1)%c.length]}function o(){a.value.temp<30&&a.value.temp++}function C(){a.value.temp>16&&a.value.temp--}return T(()=>{}),(c,v)=>(d(),p("div",{class:"panel-container",style:P({width:`${h.width}px`})},[l("div",{class:y(["panel-content",{"is-active":a.value.status==="开机"}])},[(d(!0),p(B,null,H(b.value,(n,m)=>(d(),p("div",{key:m,class:"panel-content-row"},[l("div",null,k(n.label),1),l("div",null,[f(k(n.value),1),n.unit?(d(),p("span",L,k(n.unit),1)):M("",!0)])]))),128))],2),l("div",{class:y(["panel-dot",{"is-active":a.value.status==="开机"}])},null,2),l("div",z,[(d(!0),p(B,null,H(_.value,n=>(d(),p("button",{key:n.id,onClick:n.clickHandler},[l("i",{class:y(n.iconClass)},null,2)],8,I))),128))])],4))}},U=V(O,[["__scopeId","data-v-f8989df3"]]),q=l("h1",null,"三维场景",-1),G=l("span",null,"区域",-1),J=l("h5",null,"所在楼层",-1),K=l("h5",null,"设备状态",-1),Q=l("h5",null,"风速",-1),R=l("h5",null,"室内温度",-1),X=l("h5",null,"所在楼层",-1),Y=l("h5",null,"设备状态",-1),Z=l("h5",null,"风速",-1),ee=l("h5",null,"室内温度",-1),ae={__name:"indoor",setup(D){const h=u([{region:"25楼空调",id:1},{region:"24楼空调",id:2},{region:"23楼空调",id:3}]),a=W([{alarm_event:"11",handle_person:"john",alarm_starttime:"1"},{alarm_event:"11",handle_person:"jane",alarm_starttime:"1"}]),b=u(["25楼办公室1","25楼办公室2"]),_=u({labels:[],datasets:[{label:"Average Voltage (Volts)",borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",data:[],fill:!0},{label:"Average Power (Watts)",borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.5)",data:[],fill:!0},{label:"Sum Energy (kWh)",borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",data:[],fill:!0}]});u("Device Status"),u(380);const g=async()=>{try{const o=await(await fetch("https://www.njbinhui.cn/api/metrics/aggregate?startDate=2024-04-23%2000:00:00&endDate=2024-04-25%2000:00:00&interval=hour")).json();w(o)}catch(s){console.error("Failed to fetch data:",s)}},w=s=>{_.value.labels=s.map(o=>o.interval_start),_.value.datasets[0].data=s.map(o=>o.avg_vol_a),_.value.datasets[1].data=s.map(o=>o.avg_power_total),_.value.datasets[2].data=s.map(o=>o.sum_energy)};return A(()=>{g()}),(s,o)=>{const C=i("v-card-title"),c=i("v-list"),v=i("v-card"),n=i("v-col"),m=i("v-btn"),j=i("v-btn-toggle"),r=i("v-row"),F=i("v-select"),N=i("BaseTable"),S=i("v-container");return d(),E(S,{fluid:""},{default:t(()=>[e(r,{"no-gutters":"",align:"center"},{default:t(()=>[e(n,{cols:"1"},{default:t(()=>[e(v,{class:"mx-auto","max-width":"300",color:"#3485FF"},{default:t(()=>[e(C,null,{default:t(()=>[f("楼层")]),_:1}),e(c,{items:h.value,"item-title":"region","item-value":"id",lines:"two",color:"primary"},null,8,["items"])]),_:1})]),_:1}),e(n,{cols:"9"},{default:t(()=>[q]),_:1}),e(n,{cols:"2"},{default:t(()=>[e(r,{class:"pt-1 justify-center"},{default:t(()=>[e(j,{color:"primary",rounded:"lg",density:"comfortable",group:"",divided:"",variant:"text",elevation:"2"},{default:t(()=>[e(m,null,{default:t(()=>[f(" 设备统计 ")]),_:1}),e(m,null,{default:t(()=>[f(" 设备列表 ")]),_:1})]),_:1})]),_:1}),e(r,{class:"pt-3 align-center"},{default:t(()=>[G,e(F,{items:b.value,density:"compact",label:"区域",class:"pl-5",variant:"solo",color:"primary"},null,8,["items"])]),_:1}),e(r,null,{default:t(()=>[e(x,{title:"空调控制器"},{content:t(()=>[e(U,{id:1})]),_:1})]),_:1}),e(r,{class:"pt-2"},{default:t(()=>[e(x,{title:"设备信息"},{content:t(()=>[e(r,null,{default:t(()=>[e(n,null,{default:t(()=>[J,K,Q,R]),_:1}),e(n,null,{default:t(()=>[X,Y,Z,ee]),_:1})]),_:1})]),_:1})]),_:1}),e(r,{class:"pt-2"},{default:t(()=>[e(x,{title:"报警记录"},{content:t(()=>[e(N,{tableData:a},null,8,["tableData"])]),_:1})]),_:1})]),_:1})]),_:1}),e(r)]),_:1})}}};export{ae as default};
